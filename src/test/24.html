<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      html,
      body {
        height: 100%;
      }
      .wrap {
        height: 100%;
        overflow-y: auto;
      }
      .content {
        height: 5000px;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="content"></div>
    </div>
    <script>
      // 1 call实现原理
      Function.prototype._call = function (target, ...args) {
        if (!target) target = window
        const fn = this

        target.fn = fn

        const result = target.fn(...args)

        delete target

        return result
      }

      // 2 apply实现原理

      Function.prototype._apply = function (target, args) {
        if (!target) target = window

        const fn = this

        target.fn = fn

        let result

        if (!args) {
          result = target.fn()
        } else {
          result = target.fn(args)
        }

        return result
      }
      // 3 bind实现原理


      // 4 下划线转大驼峰
      function test1(str) {
        return str.replace(/_(\w)/g,($1,$2) => {
          console.log($1,$2)
          return $2.toUpperCase()
        })
      }

      let str = 'a_ad_df'

      console.log(test1(str))

      // 5 大驼峰转下划线
      function test2(str) {
        return str.replace(/([A-Z])/g, '_$1')
      }
      let str2 = 'abCjVk'
      console.log(test2(str2))

      // 6 深度拷贝

      // 7 冒泡排序
      function test3(arr) {
        let len = arr.length

        for(let i = 0; i < len - 1; i++) {
          for( let j = 0; j < len - i - 1; j++) {
            if(arr[j] > arr[j + 1]) {
              [arr[j], arr[j+1]] = [arr[j+1],arr[j]]
            }
            
          }
        }
      }

      let arr3 = [3,1,6,89,9]
      test3(arr3)

      console.log(arr3)


      // 8 new实现原理
      function _new () {

        const constructor = Array.prototype.shift(arguments)

        if(typeof constructor !== 'function') {
          throw 'Error'
        }

        let result = {}

        result.__proto__ = constructor.prototype

        const fnResult = constructor.call(result, arguments)

        if(fnResult && typeof fnResult === 'object') {
          result = fnResult.__proto__ = constructor.prototype
        } else if (typeof fnResult === 'function') {
          result = fnResult
        }

        return fnResult


      }

      // 9 防抖函数

      // 10 节流函数
    </script>
  </body>
</html>
